{% macro display(categories) %}
    {% import _self as checklist %}
    {% for category in categories %}
        <li class="list-group-item">
            <strong>{{ category.category_name }}</strong>{{ checklist.addButton(category) }}<a href="#" class="btn btn-default">Lisää kategoria</a><a href="#" class="btn btn-default">Lisää aika/paikka</a><a href="#" class="btn btn-default">Lisää merkintä</a><a href="#" class="btn btn-danger">Poista</a>
            {% if not category.subcategories is empty %}
                <ul class="list-group">
                    {{ checklist.display(category.subcategories) }}
                </ul>
            {% endif %}
        </li>
    {% endfor %}
{% endmacro %}

{% macro addButton(category) %}
    {% import _self as checklist %}
    <div class="btn-group">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
          Lisää kategoria
        </button>
        <div class="dropdown-menu">
            <form method="post" action="{{base_path}}/categories">
                <div class="form-group">
                  <label>Nimi</label>
                  <input type="text" name="category_name" class="form-control">
                </div>

                <div class="form-group">
                  <input type="hidden" name="supercategory" value="{{ category.id }}" class="form-control">
                </div>

                <div class="form-group">
                  <button type="submit" class="btn btn-primary">Lisää</button>
                </div>
          </form>
        </div>
  </div>
{% endmacro %}

{% import _self as checklist %}

{% extends "base.html" %}
{% block content %}

<h1>Käyttäjän Ville-Matti muistilista</h1>
<ul class="list-group">
    {{ checklist.display(root_category.subcategories) }}
</ul>

{% endblock %}